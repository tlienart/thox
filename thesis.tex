\input{preamble.tex}
\input{commands.tex}

\newif\iftoc
\newif\ifintro
\newif\ifbgs
\newif\iftfs
\newif\iflbps
\newif\ifbgm
\newif\ifpbp
\newif\ifsnep

\toctrue   % \tocfalse
\introtrue %\introfalse
\bgstrue  %\bgsfalse
\tfstrue    %\tfsfalse
\lbpstrue   %\lbpsfalse
\bgmtrue %  \bgmfalse
\sneptrue  % \snepfalse
\pbptrue   % \pbpfalse

\newcommand{\itsepa}{\itsep0} % adjust all itseps in one shot

\reversemarginpar
\newcommand{\margnote}[1]{\marginpar{\hfill\fontsize{8}{0}{\idblue{(#1)}}}}

\usepackage{xspace}
\usepackage[backgroundcolor=Yellow!30,
			textsize=tiny]{todonotes}

\renewcommand\margnote[1]{\xspace}
\renewcommand{\P}{\mathbb P}

\newcommand\nudx{\nu(\!\dx)}
\renewcommand\transp{^t}

\usepackage{longtable}

\newcommand{\bif}{\text{BIF}}
\newcommand{\tbif}{\widetilde{\bif}}
\newcommand{\htbif}{\widehat\tbif}
\newcommand{\pd}{\text{PD}}
\newcommand{\hpd}{\widehat\pd}

%%%%%%%%%%%%%%%%%%%%%%%%%%
% COMMANDS FOR REVIEWING %
%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\check}[1]{
	\todo{\textbf{checked}: #1}\xspace
	}
\newcommand{\add}[1]{
	\todo[backgroundcolor=red!20,linecolor=red]{
		\textbf{add}: #1
		}
	\xspace
}
\newcommand{\addref}{
	\todo[backgroundcolor=green!20,linecolor=green]{
		\textbf{add citation}
		}
	}


%%%%%%%%%%%%%%%%
\begin{document}

\onehalfspacing

%%%% ABSTRACT SEPARATE
% This is used to create the separate, one-page abstract that you are required to hand into the Exam
% Schools.  You can comment it out to generate a PDF for printing or whatnot.
%\begin{abstractseparate}
%	\input{text/abstract} % Create an abstract.tex file in the 'text' folder for your abstract.
%\end{abstractseparate}

\input{parts/title}
\clearpage
\thispagestyle{empty}

%%%% ACKNOWLEDGEMENTS

% ...

%%%% ABSTRACT

% ...

\titleformat{\chapter}[hang]{\Huge\bfseries\sc\color{TitleCol}\raggedleft}{\thechapter\hspace{20pt}\textcolor{Gray}{$\mid$}\hspace{20pt}}{0pt}{\Huge\bfseries\color{TitleCol}\sc}


%%%% TABLE OF CONTENTS

\singlespacing
\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{2}
\iftoc\tableofcontents\fi
\pagenumbering{roman}
\setcounter{page}{1}
\onehalfspacing
%%%% NOTATIONS / ABBREVIATIONS

\raggedbottom
\input{parts/notations}

% --------------------------------------
% Now start the flushing + doublespacing

\doublespacing


%%%%%%%%%%%%%%%%%%%%%%
\chapter{Introduction}\setcounter{page}{1}\pagenumbering{arabic}

\ifintro\input{parts/introduction}\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%
\part{Sampling Algorithms} % part I

%%%%%%%%%%%%%%%%%%%%
\chapter{Background}

\ifbgs\input{parts/bg_sampling}\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{\label{chap:BIS}Backward Information Smoothing}

\iftfs\input{parts/twofilter}\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Local Bouncy Particle Sampler}

\iflbps\input{parts/lbps}\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SECOND PART -------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\part{Approximate Bayesian Inference} % part II

%%%%%%%%%%%%%%%%%%%%
\chapter{Background}

\ifbgm\input{parts/bg_messpass}\fi

\chapter[EP for Distributed Bayesian Inference]{\label{chap:EPforDBI}Expectation Propagation for\\ Distributed Bayesian Inference}
\ifsnep\input{parts/snep}\fi

\chapter[EPBP]{Expectation Propagation for\\ Particle Belief Propagation}

\ifpbp\input{parts/pbp}\fi


%%%%%%%%%%%%%%%%%%%%
\chapter{Conclusion}

\input{parts/conclusion}

%%%%%%%%%%%

\begin{appendices}
\chapter{Appendix to part 1}
\input{parts/appendix}

\chapter{Appendix to part 2}
\end{appendices}



% BIBLIOGRAPHY
% ------------
\newpage
\renewcommand{\bibname}{References}
\addcontentsline{toc}{chapter}{References}
\bibliographystyle{myabbrvnat}
\singlespacing
\begin{footnotesize}
\bibliography{texReferences}
\end{footnotesize}

%%%%%%%%%%%%%%
\end{document}
