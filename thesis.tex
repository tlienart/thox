\input{preamble.tex}
\input{commands.tex}

\newif\iftoc
\newif\ifintro
\newif\ifbgs
\newif\iftfs
\newif\iflbps
\newif\ifbgm
\newif\ifpbp
\newif\ifsnep

\tocfalse
\introfalse
\bgsfalse % background sampling
\tfsfalse
\lbpsfalse
\bgmtrue % background mess pass
\pbpfalse
\sneptrue

%\setlength\parindent{0pt} % no paragraph indentation

\reversemarginpar
\newcommand{\margnote}[1]{\marginpar{\hfill\fontsize{8}{0}{\idblue{(#1)}}}}

\usepackage{xspace}
\usepackage[backgroundcolor=Yellow!30,
			textsize=tiny]{todonotes}
\renewcommand{\check}[1]{\todo{\textbf{checked}: #1}\xspace}
\newcommand{\add}[1]{\todo[backgroundcolor=red!20,linecolor=red]{\textbf{add}: #1}\xspace}

\renewcommand\margnote[1]{\xspace}
\renewcommand{\P}{\mathbb P}

\newcommand\nudx{\nu(\!\dx)}
\renewcommand\transp{^t}

%%%%%%%%%%%%%%%%
\begin{document}

\onehalfspacing

%%%% ABSTRACT SEPARATE
% This is used to create the separate, one-page abstract that you are required to hand into the Exam
% Schools.  You can comment it out to generate a PDF for printing or whatnot.
%\begin{abstractseparate}
%	\input{text/abstract} % Create an abstract.tex file in the 'text' folder for your abstract.
%\end{abstractseparate}

\input{parts/title}
\clearpage
\thispagestyle{empty}

%%%% ACKNOWLEDGEMENTS

% ...

%%%% ABSTRACT

% ... 

\titleformat{\chapter}[hang]{\Huge\bfseries\sc\color{TitleCol}\raggedleft}{\thechapter\hspace{20pt}\textcolor{Gray}{$\mid$}\hspace{20pt}}{0pt}{\Huge\bfseries\color{TitleCol}\sc}


%%%% TABLE OF CONTENTS

\singlespacing
\setcounter{tocdepth}{1}
\setcounter{secnumdepth}{2}
\iftoc\tableofcontents\fi
\pagenumbering{roman}
\setcounter{page}{1}
\onehalfspacing
%%%% NOTATIONS / ABBREVIATIONS

\input{parts/notations}

% --------------------------------------
% Now start the flushing + doublespacing

\doublespacing
\flushbottom

%%%%%%%%%%%%%%%%%%%%%%
\chapter{Introduction}\setcounter{page}{1}\pagenumbering{arabic}

\ifintro\input{parts/introduction}\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%
\part{Sampling Algorithms} % part I 

%%%%%%%%%%%%%%%%%%%%
\chapter{Background}

\ifbgs\input{parts/bg_sampling}\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Two Filter Smoothing}

\iftfs\input{parts/twofilter}\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Local Bouncy Particle Sampler}

\iflbps\input{parts/lbps}\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SECOND PART -------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\part{Variational Inference} % part II

%%%%%%%%%%%%%%%%%%%%
\chapter{Background}

\ifbgm\input{parts/bg_messpass}\fi

\chapter[EPBP]{Expectation Particle\\ Belief Propagation}

\ifpbp\input{parts/pbp}\fi

\chapter[SNEP]{Stochastic Natural-Gradient\\ Expectation Propagation}
\ifsnep\input{parts/snep}\fi

%%%%%%%%%%%%%%%%%%%%
\chapter{Conclusion}

\input{parts/conclusion}

%%%%%%%%%%%

\appendix{}
\addcontentsline{toc}{part}{Appendix}

\input{parts/appendix}


% BIBLIOGRAPHY
% ------------
\newpage
\renewcommand{\bibname}{References}
\addcontentsline{toc}{chapter}{References}
\bibliographystyle{myabbrvnat}
\begin{footnotesize}
\bibliography{texReferences}
\end{footnotesize}

%%%%%%%%%%%%%%
\end{document}